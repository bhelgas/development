<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap');
        :root {
            --accent-color: black;
            --text-color: black;
        }
        * {
            margin: 0;
            padding: 0;
        }
        body {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 25px;
            padding: 25px;
            box-sizing: border-box;
            height: 100dvh;
            font-family: "Plus Jakarta Sans";
            color: var(--text-color);
        } 
        header {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        header, section {
            background-color: white;
            padding: 25px;
            transition: .2s ease-in-out;
            box-shadow: 10px 10px 0 var(--accent-color);
            border: 2px solid black;
        }
        main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        section#userStatsBanner {
            height: 3rem;
            padding: 5px 25px 5px 25px;
            display: grid;
            grid-template-columns: repeat(3,1fr);
            align-items: center;
            justify-content: space-between;
            box-shadow: 10px 10px 0 var(--accent-color);
            border-radius: 0;
        }
        .text-left {text-align: left;}
        .text-center {text-align: center}
        .text-right {text-align: right;}
        section#userStatsBanner div {
            display: flex;
            flex-direction: column;
        ;
        }
        section#currentPage {
            height: 100%;
            padding: 25px;
        }

        div.header {
            display: flex;
            gap: 5px;
            align-items: center;
        }
        .text-light {font-weight: 200;}
        .text-bold {font-weight: bold;}

        .text-link {
            font-weight: 400;
            border-bottom: 2px solid transparent; 
            padding-bottom: 2px;
            cursor: pointer;
        }
        .text-link:hover {
            border-color: var(--text-color);
        }
        .navigation {
            display: flex;
            flex-direction: column;
            gap: 20px
        }
        .navigationLink {
            display: flex;
            gap: 20px;
        }
        #currentHeader {
            margin-bottom: 20px;
        }
        #currentContent {
            display: grid;
            grid-template-columns: repeat(3,1fr);
            box-sizing: border-box;
            gap: 20px;
            overflow: auto;
        }
        .inventoryItem, .storeItem {
            background-color: white;
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            padding: 10px;
            height: calc(auto + 2rem);
            display: flex;
            flex-direction: column;
            gap: 5px;
            justify-content: space-between;
        }
        .SVG {width: 2rem; height: 2rem;fill:var(--text-color)}
        .objectButton {
            background-color: var(--accent-color);
            color: white;
            border: 2px solid var(--accent-color);
            padding: 5px 15px 5px 15px;
            transition: .2s ease-in-out;
            cursor: pointer;
            border-radius: 100px;
            width: fit-content;
            margin-top: 20px;
        }
        .objectButton:hover {
            background-color: white;
            box-shadow: 5px 5px 0 var(--accent-color);
            margin-right: 5px;
            color: var(--accent-color);
        }
        .underline {width:fit-content;border-bottom: 2px solid var(--text-color); padding-bottom: 2.5px}

        #notice {
            opacity: 1;
            display: none;
            position: fixed;
            background-color: white;
            color: black;
            font-weight: bolder;
            transition: .4s ease-in-out;
            border-radius: 100px;
            padding: 10px 20px 10px 20px;
            left: 30px; bottom: 30px; right: 30px;
            border: 2px solid black;
            box-shadow: 10px 10px 0 black;
        }
        #pageName {
            display: flex !important;
            flex-direction: row !important;
            gap: 10px;
            justify-content: center !important;
            align-items: center !important;
        }
    </style>
</head>
<body>
    <div id="notice">
        This text should not be visible. Check console.
    </div>
    <!-- Sidebar -->
    <header role="navigation">
        <div class="navigation">
            <h1>Game</h1>
            <div class="navigationLink">
                <svg class="SVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="512" height="512"><g><path d="M244.317,299.051c-90.917,8.218-160.183,85.041-158.976,176.32V480c0,17.673,14.327,32,32,32l0,0c17.673,0,32-14.327,32-32   v-5.909c-0.962-56.045,40.398-103.838,96-110.933c58.693-5.82,110.992,37.042,116.812,95.735c0.344,3.47,0.518,6.954,0.521,10.441   V480c0,17.673,14.327,32,32,32l0,0c17.673,0,32-14.327,32-32v-10.667c-0.104-94.363-76.685-170.774-171.047-170.67   C251.854,298.668,248.082,298.797,244.317,299.051z"/><path d="M256.008,256c70.692,0,128-57.308,128-128S326.7,0,256.008,0s-128,57.308-128,128   C128.078,198.663,185.345,255.929,256.008,256z M256.008,64c35.346,0,64,28.654,64,64s-28.654,64-64,64s-64-28.654-64-64   S220.662,64,256.008,64z"/></g></svg>
                <h2 class="text-link" onclick="setPage('Statistics')">Statistics</h2>
            </div>
            <div class="navigationLink">
                <svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M23.715,6.937l-1.022-2.236c-.453-.753-1.14-1.337-1.956-1.663L14.223,.43c-.716-.286-1.473-.43-2.23-.43s-1.517,.144-2.234,.431L3.261,3.038c-.815,.327-1.5,.91-1.953,1.662L.285,6.937c-.657,1.095-.131,2.517,1.08,2.92l6.971,3.124c.208,.069,.422,.103,.632,.103,.688,0,1.346-.356,1.715-.971l1.306-2.448,1.326,2.448c.369,.615,1.028,.971,1.715,.971,.211,0,.424-.033,.632-.103l6.971-3.124c1.211-.404,1.737-1.825,1.08-2.92Zm-5.218-1.565l-6.496,2.407-6.498-2.407,5.374-2.156c.357-.143,.733-.216,1.117-.216s.759,.072,1.115,.215l5.388,2.157Zm3.502,6.96l-.003,4.925c-.002,2.273-1.452,4.282-3.608,5.001l-4.126,1.375c-.73,.244-1.498,.365-2.266,.365s-1.535-.122-2.265-.365l-4.122-1.374c-2.161-.72-3.61-2.733-3.608-5.009v-4.917l3,1.344v3.574c0,.983,.625,1.851,1.557,2.162l3.939,1.313,.002-5.968c.573-.236,1.094-.594,1.502-1.066,.409,.473,.927,.83,1.498,1.069l-.002,5.964,3.943-1.313c.93-.31,1.556-1.177,1.557-2.158l.002-3.582,3.001-1.34Z"/></svg>
                <h2 class="text-link" onclick="setPage('Inventory')">Inventory</h2>
            </div>
            <div class="navigationLink">
                <svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"><path d="m9,4c0-2.209,3.358-4,7.5-4s7.5,1.791,7.5,4-3.358,4-7.5,4-7.5-1.791-7.5-4Zm7.5,8c4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4s-7.5-1.791-7.5-4v2c0,2.209,3.358,4,7.5,4Zm-10.5,0c-3.314,0-6,2.686-6,6s2.686,6,6,6,6-2.686,6-6-2.686-6-6-6Zm1,6v3h-2v-3h-2.454l2.687-2.687c.417-.417,1.093-.417,1.51,0l2.688,2.687h-2.431Zm9.5,4.051c-1.202,0-2.338-.151-3.345-.419-.298.593-.666,1.145-1.096,1.643,1.243.488,2.779.777,4.441.777,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Zm0-8c-1.452,0-2.807-.22-3.955-.601.49.695.871,1.471,1.12,2.305.875.191,1.832.296,2.835.296,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Zm0,4c-.878,0-1.72-.081-2.503-.229.002.076.003.152.003.229,0,.596-.066,1.176-.189,1.735.835.171,1.741.265,2.689.265,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Z"/></svg>
                <h2 class="text-link" onclick="setPage('Upgrades')">Upgrades</h2>
            </div>
            <div class="navigationLink">
                <svg class="SVG" width="512" height="512" data-name="Layer 1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21,5.602V3h1.5c.829,0,1.5-.671,1.5-1.5s-.671-1.5-1.5-1.5H5.5C2.467,0,0,2.467,0,5.5V22.5c0,.829,.671,1.5,1.5,1.5s1.5-.671,1.5-1.5V5.5c0-1.378,1.122-2.5,2.5-2.5h2.5v2.602c-1.779,.912-3,2.765-3,4.898v5c0,3.033,2.467,5.5,5.5,5.5h8c3.033,0,5.5-2.467,5.5-5.5v-5c0-2.133-1.221-3.986-3-4.898Zm-3-2.602v2h-7V3h7Zm3,12.5c0,1.378-1.122,2.5-2.5,2.5H10.5c-1.378,0-2.5-1.122-2.5-2.5v-5c0-1.378,1.122-2.5,2.5-2.5h8c1.378,0,2.5,1.122,2.5,2.5v5Z"/></svg>
                <h2 class="text-link" onclick="setPage('Store')">Store</h2>
            </div>
            <div class="navigationLink">
                <svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" height="512" viewBox="0 0 24 24" width="512" data-name="Layer 1"><path d="m.291 8.552a2.443 2.443 0 0 1 .153-2.566 4.716 4.716 0 0 1 1.668-1.5l7.501-3.904a5.174 5.174 0 0 1 4.774 0l7.5 3.907a4.716 4.716 0 0 1 1.668 1.5 2.443 2.443 0 0 1 .153 2.566 2.713 2.713 0 0 1 -2.416 1.445h-18.584a2.713 2.713 0 0 1 -2.417-1.448zm22.709 13.448a2 2 0 0 0 -2-2v-8h-2v8h-3v-8h-2v8h-4v-8h-2v8h-3v-8h-2v8a2 2 0 0 0 -2 2 1 1 0 0 0 0 2h22a1 1 0 0 0 0-2z"/></svg>
                <h2 class="text-link" onclick="setPage('Bank')">Bank</h2>
            </div>
        </div>
        <div class="navigation">
            <h1>Help</h1>
            <h2 class="text-link" onclick="setPage('How to play')">How to play?</h2>
            <h2 class="text-link" onclick="setPage('Game settings')">Game settings</h2>
        </div>
    </header>



    <!-- Main content -->
    <main>
        <section id="userStatsBanner"></section>
        <section>
            <div id="currentHeader">
            </div>
            <div id="currentContent">
            </div>
        </section>
    </main>


    <script>

        // SVGs for titles and links
        var StatisticsSVG = `<svg class="SVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="512" height="512"><g><path d="M244.317,299.051c-90.917,8.218-160.183,85.041-158.976,176.32V480c0,17.673,14.327,32,32,32l0,0c17.673,0,32-14.327,32-32   v-5.909c-0.962-56.045,40.398-103.838,96-110.933c58.693-5.82,110.992,37.042,116.812,95.735c0.344,3.47,0.518,6.954,0.521,10.441   V480c0,17.673,14.327,32,32,32l0,0c17.673,0,32-14.327,32-32v-10.667c-0.104-94.363-76.685-170.774-171.047-170.67   C251.854,298.668,248.082,298.797,244.317,299.051z"/><path d="M256.008,256c70.692,0,128-57.308,128-128S326.7,0,256.008,0s-128,57.308-128,128   C128.078,198.663,185.345,255.929,256.008,256z M256.008,64c35.346,0,64,28.654,64,64s-28.654,64-64,64s-64-28.654-64-64   S220.662,64,256.008,64z"/></g></svg>`
        var InventorySVG = `<svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M23.715,6.937l-1.022-2.236c-.453-.753-1.14-1.337-1.956-1.663L14.223,.43c-.716-.286-1.473-.43-2.23-.43s-1.517,.144-2.234,.431L3.261,3.038c-.815,.327-1.5,.91-1.953,1.662L.285,6.937c-.657,1.095-.131,2.517,1.08,2.92l6.971,3.124c.208,.069,.422,.103,.632,.103,.688,0,1.346-.356,1.715-.971l1.306-2.448,1.326,2.448c.369,.615,1.028,.971,1.715,.971,.211,0,.424-.033,.632-.103l6.971-3.124c1.211-.404,1.737-1.825,1.08-2.92Zm-5.218-1.565l-6.496,2.407-6.498-2.407,5.374-2.156c.357-.143,.733-.216,1.117-.216s.759,.072,1.115,.215l5.388,2.157Zm3.502,6.96l-.003,4.925c-.002,2.273-1.452,4.282-3.608,5.001l-4.126,1.375c-.73,.244-1.498,.365-2.266,.365s-1.535-.122-2.265-.365l-4.122-1.374c-2.161-.72-3.61-2.733-3.608-5.009v-4.917l3,1.344v3.574c0,.983,.625,1.851,1.557,2.162l3.939,1.313,.002-5.968c.573-.236,1.094-.594,1.502-1.066,.409,.473,.927,.83,1.498,1.069l-.002,5.964,3.943-1.313c.93-.31,1.556-1.177,1.557-2.158l.002-3.582,3.001-1.34Z"/></svg>`;
        var UpgradesSVG = `<svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"><path d="m9,4c0-2.209,3.358-4,7.5-4s7.5,1.791,7.5,4-3.358,4-7.5,4-7.5-1.791-7.5-4Zm7.5,8c4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4s-7.5-1.791-7.5-4v2c0,2.209,3.358,4,7.5,4Zm-10.5,0c-3.314,0-6,2.686-6,6s2.686,6,6,6,6-2.686,6-6-2.686-6-6-6Zm1,6v3h-2v-3h-2.454l2.687-2.687c.417-.417,1.093-.417,1.51,0l2.688,2.687h-2.431Zm9.5,4.051c-1.202,0-2.338-.151-3.345-.419-.298.593-.666,1.145-1.096,1.643,1.243.488,2.779.777,4.441.777,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Zm0-8c-1.452,0-2.807-.22-3.955-.601.49.695.871,1.471,1.12,2.305.875.191,1.832.296,2.835.296,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Zm0,4c-.878,0-1.72-.081-2.503-.229.002.076.003.152.003.229,0,.596-.066,1.176-.189,1.735.835.171,1.741.265,2.689.265,4.142,0,7.5-1.791,7.5-4v-2c0,2.209-3.358,4-7.5,4Z"/></svg>`;
        var StoreSVG = `<svg class="SVG" width="512" height="512" data-name="Layer 1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21,5.602V3h1.5c.829,0,1.5-.671,1.5-1.5s-.671-1.5-1.5-1.5H5.5C2.467,0,0,2.467,0,5.5V22.5c0,.829,.671,1.5,1.5,1.5s1.5-.671,1.5-1.5V5.5c0-1.378,1.122-2.5,2.5-2.5h2.5v2.602c-1.779,.912-3,2.765-3,4.898v5c0,3.033,2.467,5.5,5.5,5.5h8c3.033,0,5.5-2.467,5.5-5.5v-5c0-2.133-1.221-3.986-3-4.898Zm-3-2.602v2h-7V3h7Zm3,12.5c0,1.378-1.122,2.5-2.5,2.5H10.5c-1.378,0-2.5-1.122-2.5-2.5v-5c0-1.378,1.122-2.5,2.5-2.5h8c1.378,0,2.5,1.122,2.5,2.5v5Z"/></svg>`;
        var BankSVG = `<svg class="SVG" xmlns="http://www.w3.org/2000/svg" id="Layer_1" height="512" viewBox="0 0 24 24" width="512" data-name="Layer 1"><path d="m.291 8.552a2.443 2.443 0 0 1 .153-2.566 4.716 4.716 0 0 1 1.668-1.5l7.501-3.904a5.174 5.174 0 0 1 4.774 0l7.5 3.907a4.716 4.716 0 0 1 1.668 1.5 2.443 2.443 0 0 1 .153 2.566 2.713 2.713 0 0 1 -2.416 1.445h-18.584a2.713 2.713 0 0 1 -2.417-1.448zm22.709 13.448a2 2 0 0 0 -2-2v-8h-2v8h-3v-8h-2v8h-4v-8h-2v8h-3v-8h-2v8a2 2 0 0 0 -2 2 1 1 0 0 0 0 2h22a1 1 0 0 0 0-2z"/></svg>`

        // SH Variables

        var notice = document.querySelector("#notice");

        // Dynamic elements
        var userStatsBanner = document.querySelector("#userStatsBanner");
        var currentHeader = document.querySelector("#currentHeader");
        var currentContent = document.querySelector("#currentContent");

        // User economy
        var userBalance = 200;
        var userMultiplier = 1;
        var highestBalance = 0;

        var userBankBalance = 0;

        var userUpgradeCredit = 0;

        // User ranking system
        var userRank = 2;
        var userExperience = 45;
        var userExperienceTillRankUp = 452;
        // Game configuration

        const gamerule__maxInventoryStack = 64;
        const priceLoss = 0.30;

        // Defined variables for testing purposes

        var gameName = "None";
        var gameIndex = 1;
        var highestScore = 2332;
        var hasBankAccount = false;

        var DCONTENT_BANK = "Not available";
        var bankBalance = "No bank account found";



        // End of basic variable declarations
        function setHeader() {
            userStatsBanner.innerHTML = 
            `
            <div class="text-left">
                <p class="text-bold">Balance: ${userBalance}</p>
                <p class="text-light">Multiplier: ${userMultiplier}</p>
            </div>
            <div id="pageName" class="text-center">
                 
            </div>
            <div class="text-right">
                <p class="text-bold">Rank: ${userRank}</p>
                <p class="text-light">Experience: ${userExperience}/${userExperienceTillRankUp}</p>
            </div>
            `
        }
        setHeader();
        setPage("How to play");

        class Item {
            constructor(name, price, quantity, description) {
                this.name = name;
                this.price = price;
                this.quantity = quantity;
                this.description = description;
            }
        }

        class Tool extends Item {
            constructor(name, price, quantity, description, power, durability) {
                super(name, price, quantity, description);
                this.power = power;
                this.durability = power;
            }

            addEnchantment(enchantment) {
                this.enchantment.push(enchantment);
                
                this.power += enchantment.powerBoost;
                this.durability += enchantment.durabilityBoost;
            } 
        }

        class Consumable extends Item {
            constructor(name, price, quanity, description, boost, duration) {
                super(name, price, quanity, description);
                this.boost = boost;
                this.duration = duration;
            }
        }


        class Enchantment {
            constructor(name, price, level, description, requiredRank) {
                this.name = name;
                this.price = price;
                this.level = level;
                this.description = description;
                this.requiredRank = requiredRank;
            }
        }

        const inventory = [];

        const storeItems = [
            {
                name: "Rusty Pickaxe",
                price: 20,
                description: "An old and worn pickaxe. Suitable for basic mining tasks.",
                itemType: "Tool",
                toolPower: 3,
                toolDurability: 5,
                stock: 5
            },
            {
                name: "Forager Shovel",
                price: 60,
                description: "A sturdy shovel designed for digging and soil manipulation.",
                itemType: "Tool",
                toolPower: 4,
                toolDurability: 8,
                stock: 7
            },
            {
                name: "Makeshift Fishing Rod",
                price: 40,
                description: "A simple fishing rod crafted from spare materials. Good for catching small fish.",
                itemType: "Tool",
                toolPower: 2,
                toolDurability: 4,
                stock: 2
            },
            {
                name: "Trail Rations",
                price: 15,
                description: "A simple blend of dried fruit and nuts. Restores a bit of energy.",
                itemType: "Consumable",
                boostType: "Energy",
                boostDuration: 20,
                boostPower: 3,
                stock: 10
            },
            {
                name: "Mystery Mushroom",
                price: 45,
                description: "Glows slightly. Eating this could be a good idea...or a terrible one.",
                itemType: "Consumable",
                boostType: "Random",
                boostDuration: 30,
                boostPower: 5,
                stock: 8
            }
    ];



        const rustyPickaxe = new Tool("Rusty Pickaxe", 20, 10, "An old and worn pickaxe", 3, 5);
        const unbreakingEnchantment = new Enchantment("Unbreaking", 4000, 4, "Lowers the damage taken on your tool on each use", 2, 2, 3);

        function setColor() {
            var getAccentColor = document.querySelector("#getAccentColor").value;
            var getTextColor = document.querySelector("#getTextColor").value;
            document.documentElement.style.setProperty('--accent-color', getAccentColor);
            document.documentElement.style.setProperty('--text-color', getTextColor);
        }

        function getBankDetails() {

            if(hasBankAccount) {
            DCONTENT_BANK = 
            `
                <div>
                    <h2>Welcome back to Benjamin's Bank</h2><br><br>
                    <p><b>You have $${userBankBalance} on your account</b></p><br>
                    <button class="objectButton" onclick="setPage("Withdrawal")">Withdraw</button>
                    <button class="objectButton" onclick="setPage("Deposit")">Deposit</button>
                    <br><br>
                </div>
            `
            return DCONTENT_BANK;
            return bankBalance;
        } else {
            DCONTENT_BANK = 
            `
            <div>
                <h2>Welcome to the Bank</h2>
                <p>You do not currently have a bank account with us, would you like to create one for $1000?</p><br><br>
                <button class="objectButton" onclick="createBankAccount()" >Create a bank account with us</button>     
            </div>          
            `
            var bankBalance = `<a onclick="setPage('Bank')" class="text-link">Click here to open a bank account</a>`
            return bankBalance;
            return DCONTENT_BANK;
        }
        return DCONTENT_BANK;
        }
        function createBankAccount() {
            try {
                if(userBalance < 1000) {
                    notice.innerHTML = `Insufficient balance to purchase a bank account`;
                    displayErrorMessage();
                } else {
                    hasBankAccount = true;
                    userUpgradeCredit = 400;
                    setPage('Thank you', `
                    <b>Welcome to Benjamin's Bank</b><br>
                    Your bank account has been successfully created.<br><br>
                    As a thank you for opening an account, we've added a $ ${userUpgradeCredit} upgrade bonus to your profile. <br>You can use this bonus to upgrade your gear instead of using your own money<br><br>
                    <br><br>
                    `);
                    return hasBankAccount;
                    bankBalance = userBankBalance;
                }
            } catch (error) {
                notice.innerHTML = `Error creating bank account ${error}`;
                displayErrorMessage();
            }
            return hasBankAccount;
        }
        // Gets the page to display
        async function setPage(pageName, notice)  {
            // This makes sure that content does not appear multiple times
            currentContent.innerHTML = ``;
            var documentTitle = document.querySelector("#pageName");
            switch (pageName) {
        // STATISTICS 
                case "Statistics":
                    
                    await getBankDetails(); 
                    documentTitle.innerHTML = `<h1>Player ${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header">${StatisticsSVG}<h1>Player ${pageName}</h1></div>
                    `;
                    currentContent.innerHTML = 
                    `
                    <div>
                        <h2 class="underline">Economy</h2><br>
                        <b>Balance: </b>$${userBalance}<br>
                        <b>Balance in bank: </b>$${bankBalance}<br><br>
                        <b>Upgrade credit: </b> $${userUpgradeCredit}<br><br>
                        <b>Rank: </b>${userRank} - ${userExperienceTillRankUp-userExperience} more XP till RankUp! <br><br> 
                        <h2 class="underline">Items owned</h2><br>
                        <b>${inventory.length} items in your inventory</b><br>
                        <button class="objectButton" onclick="setPage('Store')">Buy more</button>
                        
                        <br><br>
                        <h2 class="underline">Game Statistics</h2><br>
                        <b>Overall best: </b>${highestScore} in ${gameName+gameIndex}<br>
                        <button class="objectButton" onclick="startDungeon(userRank)">Start rank-based game</button>
                        </div>
                    `;
                    break;
        // INVENTORY
                case "Inventory": 
                documentTitle.innerHTML = `<h1>Player ${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header">${InventorySVG}<h1>Player ${pageName}</h1></div>
                    `;

                    // Display inventory with foreach
                    inventory.forEach(item => {
                        if(item.itemType == "Tool") {
                            currentContent.innerHTML +=
                                    `
                                        <div class="inventoryItem">
                                            <div>
                                                <b>Name: </b> ${item.name} (x${item.quantity})<br>  
                                                <b>About: </b> ${item.description}<br>   
                                                <b>ItemType: </b> Tool<br>   
                                            </div>
                                            <div>
                                                <button class="objectButton" onclick="sellItem(\'${item.name}\', ${item.quantity}, ${item.price}, \'${pageName}\')">Sell for $${(Math.floor(item.price*priceLoss))}</button>
                                                <button class="objectButton" onclick="useItem('${item.name}')">Use</button>
                                            </div>
                                        </div>
                                    `;
                        } else if(item.itemType == "Consumable") {
                            currentContent.innerHTML +=
                                        `
                                            <div class="inventoryItem">
                                                <div>
                                                    <b>Name: </b> ${item.name} (x${item.quantity})<br>  
                                                    <b>About: </b> ${item.description}<br>   
                                                    <b>ItemType: </b> ${item.itemType}<br>   
                                                </div>
                                                <div>
                                                    <button class="objectButton" onclick="sellItem(\'${item.name}\', ${item.quantity}, ${item.price}, \'${pageName}\')">Sell for $${item.price}</button>
                                                    <button class="objectButton" onclick="consumeItem('${item.name}')">Consume</button>
                                                </div>
                                            </div>
                                        `;
                        } else {
                            notice.innerHTML = `Item ${item.name} could not be displayed`;
                            displayErrorMessage();
                        }
                });
                    break;
        // UPGRADES
                case "Upgrades":
                documentTitle.innerHTML = `<h1>${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header">${UpgradesSVG}<h1>${pageName}</h1></div>
                    `
                    currentContent.innerHTML = `Under development`;
                    break;
        // STORE
                case "Store": 
                documentTitle.innerHTML = `<h1>${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header">${StoreSVG}<h1>${pageName}</h1></div>
                    `;
                    storeItems.forEach(item => {
                        currentContent.innerHTML +=
                        `
                            <div class="storeItem">
                                <div>
                                    <b>Name: </b> ${item.name} (x${item.stock})<br>  
                                    <b>About: </b> ${item.description}<br>   
                                    <b>ItemType: </b> ${item.itemType}<br>      
                                </div>
                                <button class="objectButton" onclick="buyItem(\'${item.name}\', ${item.price}, ${item.stock} , '${item.itemType}', '${item.description}')">Buy me for $${item.price}</button>
                            </div>
                        `;
                    });
                    break;
        // BANK
                case "Bank": 
                    await getBankDetails();
                    documentTitle.innerHTML = `<h1>${pageName}</h1>`;
                    currentHeader.innerHTML = 
                        `
                            <div class="header">${BankSVG}<h1>${pageName}</h1></div>
                        `
                        currentContent.innerHTML = 
                        `
                        ${DCONTENT_BANK}
                    `;
                    break;
        // HOW TO PLAY
                case "How to play": 
                    documentTitle.innerHTML = `<h1>${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header"><h1>${pageName}</h1></div>
                    `
                    currentContent.innerHTML = 
                    `
                    <div>
                        <p>idk m8, good question tho</p>
                    </div>
                    `;
                    break;
        // GAME SETTINGS
                case "Game settings": 
                    documentTitle.innerHTML = `<h1>${pageName}</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header"><h1>${pageName}</h1></div>
                    `
                    currentContent.innerHTML = `
                    <div>
                        Set accent color: <input type="color" id="getAccentColor"><br>
                        Set text color: <input type="color" id="getTextColor"><br>
                        <button class="objectButton" onclick="setColor()">Set colors</button>
                    </div>`;
                    break;
        // THANK YOU
                case "Thank you": 
                        documentTitle.innerHTML = `<h1>Thank you</h1>`;
                        currentHeader.innerHTML = 
                        `
                        <div class="header"><h1>Thank you!</h1></div>
                        `
                        currentContent.innerHTML = 
                        `
                        <p>${notice}</p>
                        `
                    break; 
        // ERROR PAGE
                default:
                    documentTitle.innerHTML = `<h1>Page not found</h1>`;
                    currentHeader.innerHTML = 
                    `
                        <div class="header"><h1>404 - Page not found</h1></div>
                    `;
                    break;
            }
        }
        // HANDLE ITEM PURCHASE
        function buyItem(name, price, stock, itemType, itemDescription, boostType, boostDuration, boostPower, toolDurability, toolPower, enchantmentDescription, enchantmentLevel, enchanted, enchantmentType, index) {
            let existingItem = inventory.find(item => item.name === name);
            let getName = storeItems.find(item => item.name === name)
            let getIndex = storeItems.indexOf(getName);
            console.log(getIndex, itemType);
            try {
                if(getIndex != -1) {
                    switch (itemType) {
                        case "Tool":
                            if(userBalance < price) {
                                notice.innerHTML = `Insufficent balance. Item costs ${price} you have ${userBalance}`;
                                displayErrorMessage();
                            } else {
                                if(existingItem) {
                                    if(existingItem.quantity == gamerule__maxInventoryStack) {
                                        notice.innerHTML = `Maximum quantity of ${name}`;
                                        displayErrorMessage();
                                    } else {
                                        existingItem.quantity += 1;
                                    }
                                } else {
                                    inventory.push({
                                        name: name, 
                                        price: (Math.floor(price*priceLoss)), 
                                        quantity: 1, 
                                        itemType: itemType, 
                                        itemDescription: itemDescription, 
                                        toolDurability: toolDurability, 
                                        toolPower: toolPower,
                                        enchanted: false,
                                        enchantmentLevel: 0,
                                        enchantmentDescription: "Not enchanted"
                                    })
                                }
                                notice.innerHTML = `Item ${name} has been purchased for ${price}`;
                                userBalance -= price;
                                storeItems[getIndex].stock -= 1;
                                setHeader();
                                setPage("Store");
                                console.log(getIndex, itemType);
                            }
                                break;
                            case "Consumable":
                                if(userBalance < price) {
                                    
                                        notice.innerHTML = `Insufficent balance. Item costs $${price} you have $${userBalance}`;
                                        displayErrorMessage();;
                                    } else {
                                        if(existingItem) {
                                            if(existingItem.quantity == gamerule__maxInventoryStack) {
                                                notice.innerHTML = `Maximum quantity of ${name}`;
                                                displayErrorMessage();
                                            } else {
                                                existingItem.quantity += 1;
                                            }
                                        } else {
                                            inventory.push({
                                                name: name, 
                                                price: (Math.floor(price*priceLoss)), 
                                                itemType: itemType, 
                                                quantity: 1, 
                                                itemDescription: itemDescription, 
                                                boostType: boostType, 
                                                boostDuration: boostDuration, 
                                                boostPower: boostPower
                                            });
                                        }
                                        notice.innerHTML = `Item ${name} has been purchased for $${price}`;
                                        displayErrorMessage();
                                        userBalance -= price;
                                        storeItems[getIndex].stock -= 1;
                                        setHeader();
                                        setPage("Store");
                                        console.log(getIndex, itemType);
                                    }
                                break;

                            default: 
                                notice.innerHTML = `unspecified error, please stop`;
                                displayErrorMessage();
                                break;
                        }
                    } else {
                        notice.innerHTML = `Error buying item. Item does not exist for some odd reason...?`;
                        displayErrorMessage();
                    }
                } catch (error) {
                    notice.innerHTML = `Error buying item ${name} because of: ${error}`;
                    displayErrorMessage();
                }};

    // HANDLE SELL ITEM
        function sellItem(index, name, quantity, price, pageName) {
                let getStore = storeItems.find(item => item.name == name);
                try {
                    if(getStore) {
                        if(inventory[index].quantity > 1) {
                            inventory[index].quantity -= 1;     
                        } else {
                            inventory.splice(index, 1);
                        }
                        notice.innerHTML = `${name} sold. For $${price}`;
                        displayErrorMessage();
                        userBalance += price;
                        storeItems[index].stock += 1;
                        setPage(`${pageName}`);
                        setHeader();
                    } else {
                        notice.innerHTML = `Cannot sell unknown items`;
                        displayErrorMessage();
                    };
                } catch (error) {
                    notice.innerHTML = `Error selling item ${name} because of: ${error}`;
                    displayErrorMessage();
                }
            }


        // HANDLE ERROR MESSAGE
        function displayErrorMessage() {
            notice.style.display = "block";
            notice.style.opacity = 1;
            setTimeout(() => {
                notice.style.opacity = 0;
            }, 2600);
            setTimeout(() => {
                notice.style.display = "none";
            }, 3000);
        }
        
    </script>
</body>
</html>